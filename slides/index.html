<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Kotlin für die moderne Android-Entwicklung</title>
    <meta name="description"
          content="Android-Entwickler können nur sehnsüchtig seufzen: Die neuen Java-8-Möglichkeiten bleiben ihnen vorenthalten.
              Abhilfe schafft hier die Programmiersprache Kotlin, welche dieses Jahr die 1.0 erreicht hat. Ausdrucksstarke Syntax,
              nahtlose Android Studio-Integration, funktionale Features und die vollständige Binär- und Codekompatibilität mit Java 6
              machen Kotlin auch unter Android zu einer idealen Alternative. In dieser Session erleben wir live, wie es sich anfühlt,
              die NullpointerException gegen moderne Sprachfeatures einzutauschen. Eine einfache Beispiel-App hilft beim Kennenlernen,
              sodass auch Neueinsteiger gut folgen können und interessante Einblicke in Kotlin und Android gewinnen.">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/github.css">

    <!-- Custom, overriding CSS -->
    <link rel="stylesheet" href="css/custom.css">


    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">

        <!--
          === Title ===============================================================================
        -->

        <section>
            <div style="text-align: left;">
                <h1 style="margin: 380px 0 0 0; font-size: 1.9em;">Russisch unterwegs!</h1>
                <!--<h5><i> Lightning Talk:</i></h5>-->
                <h3 style="" class="emphasize">
                    Kotlin für die <br>moderne Android-Entwicklung
                </h3>
            </div>

            <div id="version">
                2016-08-22
            </div>

            <div class="profile" style="position: absolute; top: 0px; left: 900px;">
                <div class="profile-sidebar">
                    <div class="profile-userpic">
                        <img data-src="img/BenjaminSchmid.jpg" class="img-responsive" alt="">
                    </div>
                    <div class="profile-usertitle">
                        <div class="profile-usertitle-name">
                            Benjamin Schmid
                        </div>
                        <div class="profile-usertitle-job">
                            Technology Advisor
                        </div>
                    </div>
                </div>
                <div class="profile-content">
                    <a href="https://twitter.com/bentolor">@bentolor</a>
                </div>
            </div>

            <div>
                <img data-src="img/kotlin_logos/logo_Kotlin.svg"
                     style="width: 300px; position: absolute; top: 0; left: 0;"
                     class="plain" alt="Kotlin Logo"
                />
            </div>

            <div id="rightsection">
                <code>?</code> for help
            </div>

            <div id="licence">
                <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource"
                           property="dct:title" rel="dct:type">
                    Kotlin für die moderne Android-Entwicklung
                </span>
                by
                <a xmlns:cc="http://creativecommons.org/ns#" href="https://twitter.com/bentolor"
                   property="cc:attributionName" rel="cc:attributionURL">
                    Benjamin Schmid
                </a>
                is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                    Creative Commons License (BY-NC-SA/4.0)
                </a>.
                <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                    <img alt="Creative Commons Lizenzvertrag"
                         src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"/>
                </a>

            </div>
        </section>


        <!--
          === Overview ============================================================================
        -->
        <section>
            <section data-background="img/kotlin-island-map.png" data-transition="fade-out">
                <div data-markdown class="abs">
                    ## Was ist Kotlin?
                </div>
                <div class="fragment abs" style="right: 0px; top: 620px; text-align: right">
                    <p class="large"><b>Russische Insel</b> </p>
                    <p class="decent x-small">im finnischen Golf, 32km vor Petersburg</p>
                </div>
            </section>

            <section data-background="img/kotlin_logos/icon_Kotlin.svg" class="center">
                <div style="width: 100%; text-align: right;" >
                    <p>statisch typisierte<br/>
                        <b><span class="x-large">Allzweck-Sprache</span></b><br/>
                        für JVM und Browser</p>
                </div>
            </section>

            <section data-background="img/kotlin_logos/icon_Kotlin.svg" class="center">
                <div data-markdown class="right x-small" >
                    ## Prägnanz

                    ## Sicherheit

                    ## Ausdruckstärke

                    ## Interoperabilität

                    ## Tooling
                </div>
            </section>

            <section data-background="img/kotlin_logos/icon_Kotlin.svg" class="center">
                <div class="right" >
                    <h2 class="large">Datenblatt</h2>

                    <p>Freie Software</p>
                    <p class="decent subline x-small">APL 2.0</p>

                    <p>backed by JetBrains</p>
                    <p class="decent subline x-small">20 Vollzeit & Community<br/>
                        „dogfooding“: 0,5 Mio. LOC</p>

                    <p>backed by JetBrains</p>
                    <p class="decent subline x-small">20 Vollzeit & Community</p>


                </div>
            </section>
        </section>

        <!--
          === Tooling =============================================================================
        -->

        <section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ##### `lateinit`
                        ```
                        lateinit var name: String
                        var age: Int by Delegates.notNull<String>()
                        ```
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ##### `lateinit`
                        ```
                        val imm: InputMethodManager by lazy {
                        getSystemService(INPUT_METHOD_SERVICE) as InputMethodManager
                        }
                        ```
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ##### No static modifier

                        Following on the previous point, Kotlin has unusual handling of static function and property declarations that are called from Java. It’s not bad, but it feels dirtier than necessary. For example, the Android View class defines some static constants like View.VISIBLE and static methods like View.inflate:

                        ```
                        public class View {
                        public static final int VISIBLE = 0x00000000;
                        public static final int INVISIBLE = 0x00000004;
                        public static View inflate(Context context, int resource) {...}
                        }
                        ```
                        ```
                        class View {
                        companion object {
                        @JvmField
                        val VISIBLE: Int = 0x00000000
                        @JvmField
                        val INVISIBLE: Int = 0x00000004
                        @JvmStatic
                        fun inflate(context: Context, resource: Int) {...}
                        }
                        }
                        }


                        // With annotations:
                        View.VISIBLE;

                        //Without annotations:
                        View.Companion.getVISIBLE();
                        ```
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ##### Method count
                        Writing code in Kotlin will certainly reduce the number of lines of code in your project. But it will also probably increase the method count of the compiled code, which is of course a drawback if you’re using Android. There are a number of reasons for that, but one of the larger contributors is the way Kotlin implements properties.

                        Unlike Java, the Kotlin language doesn’t provide any way to define a bare field. All val and var declarations instead create a property.

                        If you are close to the method limit in your android app, I recommend using the workaround of applying the @JvmField annotation on public constants for which you don’t expect to need a custom getter for in the future. This will prevent the getters from being generated, and can cut down on your method count.

                        It’s not all bad, though. As I discussed in my article on converting an app to 100% Kotlin, the Kotlin standard library is small and can replace a number of common Java libraries that are much larger once you don’t need them in Java any more. Thanks to the standard library, the method count in that app decreased after converting it to Kotlin. So as long as you avoid the big areas that can increase your method count, you may end up ahead in the end.
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ##### bidirektionales interop
                        Gerade auf dem Weg zurück unagenehm

                        ##### Keine SAMs, da
                        ```
                        fun registerCallback(r: () -> Unit)
                        ```

                        in Java wie folgt aufgerufen muss

                        ```
                        registerCallback(() -> {
                        /** do stuff */
                        return Unit.INSTANCE;
                        })
                        ```

                        Ergo: Libaries für Java eher in JAva
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ##### final by default
                        - functions!

                        #####  public by default

                        ##### Kein `package protected`
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### REPL: `jshell`

                        ```
                        ⋊> ~ jshell
                        |  Welcome to JShell -- Version 9-ea
                        |  For an introduction type: /help intro

                        jshell> 3 + 4 * 7
                        $1 ==> 31

                        jshell> int add(int a, int b) {
                        ...>   return a+b;
                        ...> }
                        |  created method add(int,int)

                        jshell> add(25, $1)
                        $3 ==> 56
                        ```
                        <!-- .element: class="small" -->

                        Get an overview with `/help` and  `/help shortcuts`
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown class="container">
                    <script type="text/template">
                        ### HTML5 Javadoc
                        - Enable via `-html5` parameter
                        - Search capability
                        - HTML5 & updated Doclet API
                        - Improved DocLint: <span>`-Xdoclint/package:java.*,javax.*`</span> <!-- .element: class="small" -->
                    </script>
                </div>
            </section>


            <section>
                <h3>HTML5 Javadoc example output</h3>
            </section>


            <section>
                <div data-markdown style="width: 60%; margin: 0 auto;">
                    <script type="text/template">
                        ### Cross compiling
                        #### and the `javac -release` flag
                        ````
                        javac - release N
                        ````
                        <!-- .element: class="small" -->

                        ...is equivalent to

                        ````
                        javac -source N -target N –bootclasspath rtN.jar ...
                        ````
                        <!-- .element: class="small" -->
                    </script>
                </div>
            </section>


        </section>


        <section>



            <section>
                <div data-markdown>
                    ### Process Control
                    ````java
                    <pre>// Get PIDs of own or started processes
                    out.println("Your pid is " + ProcessHandle.current().getPid());

                    Process p = Runtime.getRuntime().exec("sleep 1h");
                    ProcessHandle h = ProcessHandle.of(p.getPid())  // Optional
                            .orElseThrow(IllegalStateException::new);

                    // Do things on exiting process          // CompletableFuture
                    h.onExit().thenRun( ()-&gt; out.println("Sleeper exited") );

                    // Get info on process
                    out.printf("[%d] %s - %s\n", h.getPid(),
                               h.info().user().orElse("unknown"),
                               h.info().commandLine().orElse("none"));

                    // Kill a process
                    h.destroy();</pre>
                    ````
                </div>
            </section>

            <section>
                <div data-markdown>
                    ### Immutable Collection Factories
                    ````java
                    <pre>/* Comment sections would break ... */
                    List&lt;Integer&gt; listOfNumbers = List.of(1, 2, 3, 4, 5/*, null*/);

                    Set&lt;Integer&gt; setOfNumbers = Set.of(1, 2, 3, 4, 5/*, 1*/);

                    Map&lt;String, String&gt; mapOfString =
                        Map.of("key1", "value1", "key2", "value2");

                    Map&lt;String, String&gt; moreMapOfString =
                        Map.ofEntries(
                            Map.entry("key1", "value1"),
                            Map.entry("key2", "value2")/*,
                            Map.entry("key1", "value3")*/
                    );
                    ````
                    </pre>
                </div>
            </section>

            <section>
                <div data-markdown>
                    ### StackWalker
                    ````java
                    <pre>// return class/method only for our classes.
                    private static List&lt;String&gt; walkAndFilterStackframe() {
                      return StackWalker.getInstance().walk(s -&gt;
                        s.map( frame-&gt; frame.getClassName()+"/"+frame.getMethodName())
                               .filter(name -&gt; name.startsWith("de.exxcellent"))
                               .limit(10)
                               .collect(Collectors.toList()) );
                    }</pre>
                    ````
                </div>
            </section>

            <section>
                <div data-markdown>
                    ### New Input Stream Utilities
                    ````java
                    <pre>// All bytes from an InputStream at once
                    byte[] result = new ByteArrayInputStream(buf)
                        .readAllBytes();

                    // Directly redirect an InputStream to an OutputStream
                    new ByteArrayInputStream(buf)
                        .transferTo(System.out);</pre>
                    ````
                </div>
            </section>

        </section>


        <!--
          === Details =============================================================================
        -->
        <section>


            <section>
                <div data-markdown>
                    # Jigsaw
                </div>
            </section>

            <section>
                <div data-markdown>
                    <script type="text/template">
                        ## Jigsaw [JEP 201](http://openjdk.java.net/jeps/201)<!-- .element: class="jep" -->

                        > Modules bundle together one or more packages
                        > and offer stronger encapsulation than jars

                        - Allow **scaled down runtime JAR**  &rarr; IoT
                        - **Stronger:** In a module: `public` is no longer public to others
                        - _Sad:_ No module versioning

                    </script>
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### How it works (1)
                        `module-info.java` files declare dependencies

                        ```java
                        module com.mysql.jdbc {
                        // Module dependency
                        requires java.sql;

                        // exported package in module
                        exports com.mysql.jdbc;

                        // Implements service with instance
                        provides java.sql.Driver with com.mysql.jdbc.Driver;
                        }
                        ```
                    </script>
                </div>
            </section>


            <section>
                <div data-markdown class="container">
                    <script type="text/template">
                        ### How it works (2)
                        ##### Changes to `javac` and `java` to use modules instead of JARs
                        ````
                        javac -mp modulepath ...
                        java  -mp modulepath -m modulename/moduleclass
                        ````

                        ##### Linker
                        `jlink` can be used to link a set of modules, along with their transitive dependences,
                        to create a custom modular run-time image

                    </script>
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### `ServiceLoader` using modules (1)
                        ````
                        public abstract class BillingService {

                        }
                        ````
                    </script>
                </div>
            </section>

            <section>
                <div data-markdown style="font-size: .9em;">
                    <script type="text/template">
                        ### `ServiceLoader` using modules (2)
                        ````java
                        module anothermodule {
                        exports de.exxcellent.anothermodule;
                        requires de.exxcellent.java9;

                        // Provide Service instance (SPI with Jigsaw modules)
                        provides de.exxcellent.java9.jigsaw.spi.BillingServiceProvider
                        with de.exxcellent.anothermodule.spi.MastercardBillingServiceProvider;
                        }
                        ````
                    </script>
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### How it works (3)
                        ````
                        $ mkdir -p target/module/de.exxcellent.java9
                        $ mkdir -p target/module/anothermodule

                        $ javac $(find playground/src/main/java -name "*.java") \
                        -d target/module/de.exxcellent.java9
                        $ javac $(find playground-dependent/src/main/java -name "*.java")\
                        -d target/module/anothermodule \
                        -modulepath target/module

                        $ java  -modulepath target/module \
                        -m anothermodule/de.exxcellent.anothermodule.TestJigsawSPI
                        Mastercard billed the money!

                        ````
                    </script>
                </div>
            </section>


            <section>
                <div class="container">
                    <div data-markdown>
                        ### Tools
                        - List built-in modules: `java –listmods`
                        - Find dependencies: `jdeps –jdkinternals app.jar`
                    </div>
                    <div data-markdown style="margin-top: 60px;">
                        ### Ressources
                        - [JVM Module Summary](http://cr.openjdk.java.net/~mr/jigsaw/ea/module-summary.html)
                        - [The State of the Module System](http://openjdk.java.net/projects/jigsaw/spec/sotms/)
                    </div>
                </div>
            </section>


        </section>


        <section>
            <section>
                <div class="small">
                    <div data-markdown>
                        ## Quellen
                    </div>

                    <div class="twocol" data-markdown>
                        <script type="text/template">
                            ##### Bilder
                            - [Kotlin Islands Maps](https://commons.wikimedia.org/wiki/File:Kotlin_Island_1706.png)

                        </script>
                    </div>

                    <div class="twocol" data-markdown>
                        <script type="text/template">
                        </script>
                    </div>

                </div>
            </section>

        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
                          history: true,
                          progress: true,
                          slideNumber: true,
                          mouseWheel: true,
                          controls: false,
                          width: 1280,
                          height: 720,
                          margin: 0.1,
                          maxScale: 10,
                          center: false,
                          parallaxBackgroundImage: 'img/kotlin-island-map-light.png', // 'http://jamescroft.co.uk/wp-content/uploads/2015/01/217-L6YVU1.jpg',
                          parallaxBackgroundSize: '4177px 2118px',

                          // More info https://github.com/hakimel/reveal.js#dependencies
                          dependencies: [
                              {src: 'plugin/markdown/marked.js'},
                              {src: 'plugin/markdown/markdown.js'},
                              {src: 'plugin/notes/notes.js', async: true},
                              {
                                  src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                                  hljs.initHighlightingOnLoad();
                              }
                              },
                              {src: 'plugin/zoom-js/zoom.js', async: true}  // Zoom in and out with Alt+click
                          ]
                      });
</script>
</body>
</html>
